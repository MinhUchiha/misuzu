/*!
FullCalendar Scheduler v1.0.0
Docs & License: http://fullcalendar.io/scheduler/
(c) 2015 Adam Shaw
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):t(jQuery,moment)}(function(t,e){var n,r,i,o,s,a,l,u,c,d,h,p,f,g,m,v,y,b,w,S,D,T,C,_,x,E,k,R,I,H,F,M,$,L,A,P,j,O,N,W,B,Y,G,z,U,q,V,J,X,Z,Q,K,tt,et,nt,rt,it,ot,st,at,lt,ut,ct,dt,ht,pt,ft,gt,mt,vt,yt,bt,wt,St,Dt,Tt,Ct,_t,xt=[].slice,Et=function(t,e){function n(){this.constructor=t}for(var r in e)kt.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},kt={}.hasOwnProperty;c=t.fullCalendar,r=c.Calendar,o=c.Class,j=c.View,d=c.Grid,lt=c.intersectionToSeg,q=c.debounce,ct=c.isInt,rt=c.getScrollbarWidths,a=c.DragListener,st=c.htmlEscape,B=c.computeIntervalUnit,vt=c.proxy,N=c.capitaliseFirstLetter,O=c.applyAll,l=c.Emitter,Z=c.durationHasTime,X=c.divideRangeByDuration,J=c.divideDurationByDuration,pt=c.multiplyDuration,gt=c.parseFieldSpecs,W=c.compareByFieldSpecs,Q=c.flexibleCompare,at=c.intersectRects,K=function(e){return e.map(function(e,n){var r,i,o,s;for(o=t(n).find("> td"),r=0,i=o.length;i>r;r++)if(s=o[r],s.rowSpan<=1)return s})},bt=null,ft=function(t,e){var n,r;if(n=t.css("direction"),r=t[0],null!=e){if("rtl"===n)switch(bt){case"positive":e=e-r.clientWidth+r.scrollWidth;break;case"reverse":e=-e}return r.scrollLeft=e,t}if(e=r.scrollLeft,"rtl"===n)switch(bt){case"positive":e=e+r.clientWidth-r.scrollWidth;break;case"reverse":e=-e}return e},nt=function(t){var e,n,r;if(e=t.css("direction"),n=t[0],r=n.scrollLeft,"rtl"===e)switch(bt){case"negative":r=r-n.clientWidth+n.scrollWidth;break;case"reverse":r=-r-n.clientWidth+n.scrollWidth}return r},V=function(){var e,n,r;return e=t('<div style=" position: absolute top: -1000px; width: 1px; height: 1px; overflow: scroll; direction: rtl; font-size: 14px; ">A</div>').appendTo("body"),n=e[0],r=n.scrollLeft>0?"positive":(n.scrollLeft=1,e.scrollLeft>0?"reverse":"negative"),e.remove(),r},t(function(){return bt=V()}),F=function(){function e(e,n){this.overflowX=null!=e?e:"auto",this.overflowY=null!=n?n:"auto",this.el=t('<div class="fc-scrollpane"> <div> <div class="fc-scrollpane-inner"> <div class="fc-content"/> <div class="fc-bg"/> </div> </div> </div>'),this.scrollEl=this.el.children(),this.innerEl=this.scrollEl.children(),this.contentEl=this.innerEl.find(".fc-content"),this.bgEl=this.innerEl.find(".fc-bg"),this.scrollEl.on("scroll",vt(this,"handleScroll")).on("scroll",q(vt(this,"handleScrollStop"),100)),this.handlers={},this.gutters={}}return e.prototype.el=null,e.prototype.innerEl=null,e.prototype.contentEl=null,e.prototype.bgEl=null,e.prototype.overflowX=null,e.prototype.overflowY=null,e.prototype.isScrolling=!1,e.prototype.handlers=null,e.prototype.height=null,e.prototype.contentWidth=null,e.prototype.contentMinWidth=null,e.prototype.gutters=null,e.prototype.update=function(){var t,e,n,r,i,o,s;return o=this.scrollEl,r=this.overflowX,i=this.overflowY,e="invisible-scroll"===r,n="invisible-scroll"===i,o.toggleClass("fc-no-scrollbars",(e||"hidden"===r)&&(n||"hidden"===i)&&!ot(o)),o.css({overflowX:e?"scroll":r,overflowY:n?"scroll":i}),t={marginLeft:0,marginRight:0,marginTop:0,marginBottom:0},(e||n)&&(s=rt(o),e&&(t.marginTop=-s.top,t.marginBottom=-s.bottom),n&&(t.marginLeft=-s.left,t.marginRight=-s.right)),o.css(t)},e.prototype.getScrollbarWidths=function(){var t;return t=rt(this.scrollEl),"invisible-scroll"===this.overflowX&&(t.top=0,t.bottom=0),"invisible-scroll"===this.overflowY&&(t.left=0,t.right=0),t},e.prototype.handleScroll=function(){return this.isScrolling||(this.isScrolling=!0,this.trigger("scrollStart")),this.trigger("scroll",this.scrollEl.scrollTop(),this.scrollEl.scrollLeft())},e.prototype.handleScrollStop=function(){return this.isScrolling=!1,this.trigger("scrollStop")},e.prototype.setHeight=function(t){return this.height=t,this.updateCss()},e.prototype.getHeight=function(){var t;return null!=(t=this.height)?t:this.scrollEl.height()},e.prototype.setContentWidth=function(t){return this.contentWidth=t,this.updateCss()},e.prototype.setContentMinWidth=function(t){return this.contentMinWidth=t,this.updateCss()},e.prototype.setGutters=function(e){return e?t.extend(this.gutters,e):this.gutters={},this.updateCss()},e.prototype.updateCss=function(){var t;return this.scrollEl.height(this.height),t=this.gutters,this.innerEl.css({width:this.contentWidth?this.contentWidth+(t.left||0)+(t.right||0):"",minWidth:this.contentMinWidth?this.contentMinWidth+(t.left||0)+(t.right||0):void 0,paddingLeft:t.left||"",paddingRight:t.right||"",paddingTop:t.top||"",paddingBottom:t.bottom||""}),this.bgEl.css({left:t.left||"",right:t.right||"",top:t.top||"",bottom:t.bottom||""})},e.prototype.append=function(t){return this.contentEl.append(t)},e.prototype.scrollTop=function(t){return this.scrollEl.scrollTop(t)},e.prototype.scrollLeft=function(t){return this.scrollEl.scrollLeft(t)},e.prototype.on=function(t,e){var n;return((n=this.handlers)[t]||(n[t]=[])).push(e),this},e.prototype.trigger=function(){var t,e,n,r,i,o;for(n=arguments[0],t=2<=arguments.length?xt.call(arguments,1):[],o=this.handlers[n]||[],r=0,i=o.length;i>r;r++)e=o[r],e.apply(this,t)},e}(),ot=function(t){var e;return e=rt(t),e.left||e.right||e.top||e.bottom},H=function(){function t(t,e){var n,r,i,o;for(this.axis=t,this.scrollers=e,i=this.scrollers,n=0,r=i.length;r>n;n++)o=i[n],this.initScroller(o)}return t.prototype.axis=null,t.prototype.scrollers=null,t.prototype.masterScroller=null,t.prototype.enabled=!0,t.prototype.enable=function(){return this.enabled=!0},t.prototype.disable=function(){return this.enabled=!1},t.prototype.initScroller=function(t){return t.on("scrollStart",function(e){return function(){e.masterScroller||(e.masterScroller=t)}}(this)).on("scroll",function(e){return function(n,r){var i,o,s,a;if(t===e.masterScroller)for(a=e.scrollers,i=0,o=a.length;o>i;i++)if(s=a[i],s!==e.masterScroller)switch(e.axis){case"horizontal":s.scrollLeft(r);break;case"vertical":s.scrollTop(n)}}}(this)).on("scrollStop",function(e){return function(){t===e.masterScroller&&(e.masterScroller=null)}}(this))},t.prototype.update=function(){var t,e,n,r,i,o,s,a,l,u,c,d,h;for(t=function(){var t,e,n,r;for(n=this.scrollers,r=[],t=0,e=n.length;e>t;t++)d=n[t],r.push(d.getScrollbarWidths());return r}.call(this),a=l=u=s=0,n=0,i=t.length;i>n;n++)h=t[n],a=Math.max(a,h.left),l=Math.max(l,h.right),u=Math.max(u,h.top),s=Math.max(s,h.bottom);for(c=this.scrollers,e=r=0,o=c.length;o>r;e=++r)d=c[e],h=t[e],d.setGutters("horizontal"===this.axis?{left:a-h.left,right:l-h.right}:{top:u-h.top,bottom:s-h.bottom})},t}(),R=function(){function e(t){this.scroller=t,this.sprites=[],this.scroller.on("scrollStart",function(t){return function(){return t.shouldRequeryDimensions?t.cacheDimensions():void 0}}(this)),this.scroller.on("scroll",function(t){return function(e,n){var r,i,o;return i=t.scroller.scrollEl,r=nt(i),o=i.scrollTop(),t.viewportRect={left:r,right:r+i[0].clientWidth,top:o,bottom:o+i[0].clientHeight},t.updatePositions()}}(this))}return e.prototype.scroller=null,e.prototype.scrollbarWidths=null,e.prototype.sprites=null,e.prototype.viewportRect=null,e.prototype.contentOffset=null,e.prototype.isHFollowing=!0,e.prototype.isVFollowing=!1,e.prototype.containOnNaturalLeft=!1,e.prototype.containOnNaturalRight=!1,e.prototype.shouldRequeryDimensions=!1,e.prototype.minTravel=0,e.prototype.isForcedAbsolute=!1,e.prototype.isForcedRelative=!1,e.prototype.setSprites=function(e){var n,r,i;if(this.clearSprites(),e instanceof t)return this.sprites=function(){var n,r,o;for(o=[],n=0,r=e.length;r>n;n++)i=e[n],o.push(new I(t(i),this));return o}.call(this);for(n=0,r=e.length;r>n;n++)i=e[n],i.follower=this;return this.sprites=e},e.prototype.clearSprites=function(){var t,e,n,r;for(n=this.sprites,t=0,e=n.length;e>t;t++)r=n[t],r.clear();return this.sprites=[]},e.prototype.cacheDimensions=function(){var t,e,n,r,i,o,s;for(i=this.scroller.scrollEl,e=nt(i),s=i.scrollTop(),this.viewportRect={left:e,right:e+i[0].clientWidth,top:s,bottom:s+i[0].clientHeight},this.scrollbarWidths=this.scroller.getScrollbarWidths(),this.contentOffset=this.scroller.innerEl.offset(),r=this.sprites,t=0,n=r.length;n>t;t++)o=r[t],o.cacheDimensions()},e.prototype.forceAbsolute=function(){var t,e,n,r,i;for(this.isForcedAbsolute=!0,n=this.sprites,r=[],t=0,e=n.length;e>t;t++)i=n[t],r.push(i.doAbsolute?void 0:i.assignPosition());return r},e.prototype.forceRelative=function(){var t,e,n,r,i;for(this.isForcedRelative=!0,n=this.sprites,r=[],t=0,e=n.length;e>t;t++)i=n[t],r.push(i.doAbsolute?i.assignPosition():void 0);return r},e.prototype.clearForce=function(){var t,e,n,r,i;for(this.isForcedRelative=!1,this.isForcedAbsolute=!1,n=this.sprites,r=[],t=0,e=n.length;e>t;t++)i=n[t],r.push(i.assignPosition());return r},e.prototype.update=function(){return this.cacheDimensions(),this.updatePositions()},e.prototype.updatePositions=function(){var t,e,n,r;for(n=this.sprites,t=0,e=n.length;e>t;t++)r=n[t],r.updatePosition()},e.prototype.getContentRect=function(t){var e,n,r;return n=t.offset(),e=n.left+parseFloat(t.css("border-left-width"))+parseFloat(t.css("padding-left"))-this.contentOffset.left,r=n.top+parseFloat(t.css("border-left-width"))+parseFloat(t.css("padding-left"))-this.contentOffset.top,{left:e,right:e+t.width(),top:r,bottom:r+t.height()}},e.prototype.getBoundingRect=function(t){var e,n,r;return n=t.offset(),e=n.left-this.contentOffset.left,r=n.top-this.contentOffset.top,{left:e,right:e+t.outerWidth(),top:r,bottom:r+t.outerHeight()}},e}(),I=function(){function t(t,e){this.el=t,this.follower=null!=e?e:null,this.isBlock="block"===this.el.css("display"),this.el.css("position","relative")}return t.prototype.follower=null,t.prototype.el=null,t.prototype.absoluteEl=null,t.prototype.naturalRect=null,t.prototype.parentRect=null,t.prototype.containerRect=null,t.prototype.isEnabled=!0,t.prototype.isHFollowing=!1,t.prototype.isVFollowing=!1,t.prototype.doAbsolute=!1,t.prototype.isAbsolute=!1,t.prototype.isCentered=!1,t.prototype.rect=null,t.prototype.isBlock=!1,t.prototype.naturalWidth=null,t.prototype.disable=function(){return this.isEnabled?(this.isEnabled=!1,this.resetPosition(),this.unabsolutize()):void 0},t.prototype.enable=function(){return this.isEnabled?void 0:(this.isEnabled=!0,this.assignPosition())},t.prototype.clear=function(){return this.disable(),this.follower=null,this.absoluteEl=null},t.prototype.cacheDimensions=function(){var t,e,n,r,i,o,s,a;return r=!1,i=!1,n=!1,this.naturalWidth=this.el.width(),this.resetPosition(),e=this.follower,s=this.naturalRect=e.getBoundingRect(this.el),a=this.el.parent(),this.parentRect=e.getBoundingRect(a),t=this.containerRect=ht(e.getContentRect(a),s),o=e.minTravel,e.containOnNaturalLeft&&(t.left=s.left),e.containOnNaturalRight&&(t.right=s.right),e.isHFollowing&&et(t)-et(s)>=o&&(n="center"===this.el.css("text-align"),r=!0),e.isVFollowing&&tt(t)-tt(s)>=o&&(i=!0),this.isHFollowing=r,this.isVFollowing=i,this.isCentered=n},t.prototype.updatePosition=function(){return this.computePosition(),this.assignPosition()},t.prototype.resetPosition=function(){return this.el.css({top:"",left:""})},t.prototype.computePosition=function(){var t,e,n,r,i,o,s,a;return s=this.follower.viewportRect,n=this.parentRect,t=this.containerRect,a=at(s,n),r=null,e=!1,a&&(r=z(this.naturalRect),o=at(r,n),(this.isCentered&&!St(s,n)||o&&!St(s,o))&&(e=!0,this.isHFollowing&&(this.isCentered?(i=et(r),r.left=(a.left+a.right)/2-i/2,r.right=r.left+i):it(r,s)||(e=!1),it(r,t)&&(e=!1)),this.isVFollowing&&(_t(r,s)||(e=!1),_t(r,t)&&(e=!1)),St(s,r)||(e=!1))),this.rect=r,this.doAbsolute=e},t.prototype.assignPosition=function(){var t,e;return this.isEnabled?this.rect?!this.doAbsolute&&!this.follower.isForcedAbsolute||this.follower.isForcedRelative?(e=this.rect.top-this.naturalRect.top,t=this.rect.left-this.naturalRect.left,this.unabsolutize(),this.el.toggleClass("fc-following",Boolean(e||t)).css({top:e,left:t})):(this.absolutize(),this.absoluteEl.css({top:this.rect.top-this.follower.viewportRect.top+this.follower.scrollbarWidths.top,left:this.rect.left-this.follower.viewportRect.left+this.follower.scrollbarWidths.left,width:this.isBlock?this.naturalWidth:""})):this.unabsolutize():void 0},t.prototype.absolutize=function(){return this.isAbsolute?void 0:(this.absoluteEl||(this.absoluteEl=this.buildAbsoluteEl()),this.absoluteEl.appendTo(this.follower.scroller.el),this.el.css("visibility","hidden"),this.isAbsolute=!0)},t.prototype.unabsolutize=function(){return this.isAbsolute?(this.absoluteEl.detach(),this.el.css("visibility",""),this.isAbsolute=!1):void 0},t.prototype.buildAbsoluteEl=function(){return this.el.clone().addClass("fc-following").css({position:"absolute","z-index":1e3,"font-weight":this.el.css("font-weight"),"font-size":this.el.css("font-size"),"font-family":this.el.css("font-family"),color:this.el.css("color"),"padding-top":this.el.css("padding-top"),"padding-bottom":this.el.css("padding-bottom"),"padding-left":this.el.css("padding-left"),"padding-right":this.el.css("padding-right"),"pointer-events":"none"})},t}(),z=function(t){return{left:t.left,right:t.right,top:t.top,bottom:t.bottom}},et=function(t){return t.right-t.left},tt=function(t){return t.bottom-t.top},St=function(t,e){return Dt(t,e)&&Tt(t,e)},Dt=function(t,e){return e.left>=t.left&&e.right<=t.right},Tt=function(t,e){return e.top>=t.top&&e.bottom<=t.bottom},it=function(t,e){return t.left<e.left?(t.right=e.left+et(t),t.left=e.left,!0):t.right>e.right?(t.left=e.right-et(t),t.right=e.right,!0):!1},_t=function(t,e){return t.top<e.top?(t.bottom=e.top+tt(t),t.top=e.top,!0):t.bottom>e.bottom?(t.top=e.bottom-tt(t),t.bottom=e.bottom,!0):!1},ht=function(t,e){return{left:Math.min(t.left,e.left),right:Math.max(t.right,e.right),top:Math.min(t.top,e.top),bottom:Math.max(t.bottom,e.bottom)}},i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Et(e,t),e.prototype.resourceManager=null,e.prototype.initialize=function(){return this.resourceManager=new S(this)},e.prototype.instantiateView=function(t){var e,n;return e=this.getViewSpec(t),n=e["class"],this.options.resources&&e.options.resources!==!1&&e.resourceClass&&(n=e.resourceClass),new n(this,t,e.options,e.duration)},e.prototype.getResources=function(){return this.resourceManager.topLevelResources},e.prototype.addResource=function(t,e){var n;null==e&&(e=!1),n=this.resourceManager.addResource(t),e&&this.view.scrollToResource&&n.done(function(t){return function(e){return t.view.scrollToResource(e)}}(this))},e.prototype.removeResource=function(t){return this.resourceManager.removeResource(t)},e.prototype.refetchResources=function(){this.resourceManager.fetchResources()},e.prototype.rerenderResources=function(){var t;"function"==typeof(t=this.view).redisplayResources&&t.redisplayResources()},e.prototype.getEventResourceId=function(t){return this.resourceManager.getEventResourceId(t)},e.prototype.getPeerEvents=function(t,n){var r,i,o,s,a,l,u;for(a=e.__super__.getPeerEvents.apply(this,arguments),u=n.resourceId||"",r=[],i=0,o=a.length;o>i;i++)s=a[i],l=this.getEventResourceId(s)||"",l&&l!==u||r.push(s);return r},e.prototype.buildSelectRange=function(t,n,r){var i;return i=e.__super__.buildSelectRange.apply(this,arguments),r&&(i.resourceId=r),i},e.prototype.getResourceById=function(t){return this.resourceManager.getResourceById(t)},e.prototype.getResourceEvents=function(t){var e,n;return n="object"==typeof t?t:this.getResourceById(t),n?(e=this.resourceManager.getEventResourceField(),this.clientEvents(function(t){return t[e]===n.id})):[]},e.prototype.getEventResource=function(t){var e,n;return e="object"==typeof t?t:this.clientEvents(t)[0],e?(n=this.resourceManager.getEventResourceId(e),this.getResourceById(n)):null},e}(r),r.prototype=i.prototype,wt=j.prototype.displayEvents,j.prototype.displayEvents=function(t){return this.listenToResources(),mt(this.calendar.options.schedulerLicenseKey,this.el),this.calendar.resourceManager.getResources().then(function(e){return function(){return wt.call(e,t)}}(this))},j.prototype.isListeningToResources=!1,j.prototype.listenToResources=function(){return this.isListeningToResources?void 0:(this.calendar.resourceManager.on("add",vt(this,"addResource")).on("remove",vt(this,"removeResource")).on("reset",vt(this,"resetResources")),this.isListeningToResources=!0)},j.prototype.addResource=function(t){return this.calendar.rerenderEvents()},j.prototype.removeResource=function(t){return this.calendar.rerenderEvents()},j.prototype.resetResources=function(t){return this.calendar.rerenderEvents()},d.prototype.getEventSkinCss=function(t){var e,n,r,i,o,s,a,l,u;return u=this.view,a=t.source||{},e=t.color,l=a.color,o=u.opt("eventColor"),s=u.calendar.getEventResource(t),n=function(){var t,e;for(e=null,t=s;t&&!e;)e=t.eventBackgroundColor||t.eventColor,t=t._parent;return e},r=function(){var t,e;for(e=null,t=s;t&&!e;)e=t.eventBorderColor||t.eventColor,t=t._parent;return e},i=function(){var t,e;for(e=null,t=s;t&&!e;)e=t.eventTextColor,t=t._parent;return e},{"background-color":t.backgroundColor||e||n()||a.backgroundColor||l||u.opt("eventBackgroundColor")||o,"border-color":t.borderColor||e||r()||a.borderColor||l||u.opt("eventBorderColor")||o,color:t.textColor||i()||a.textColor||u.opt("eventTextColor")}},S=function(e){function n(t){this.calendar=t,this.unsetResources()}return Et(n,e),n.mixin(l),n.resourceGuid=1,n.ajaxDefaults={dataType:"json",cache:!1},n.prototype.calendar=null,n.prototype.topLevelResources=null,n.prototype.resourcesById=null,n.prototype.getting=null,n.prototype.fetching=null,n.prototype.getResources=function(){var e;return e=this.getting,e||(e=this.getting=t.Deferred(),this.fetchResources().done(function(t){return e.resolve(t)}).fail(function(){return e.resolve([])})),e.promise()},n.prototype.fetchResources=function(){var e;return e=this.fetching,t.when(e).then(function(t){return function(){return t.fetching=t.fetchResourceInputs().then(function(n){return t.setResources(n),e&&t.trigger("reset",t.topLevelResources),t.topLevelResources})}}(this))},n.prototype.fetchResourceInputs=function(){var e,r,i;switch(e=t.Deferred(),i=this.calendar.options.resources,"string"===t.type(i)&&(i={url:i}),t.type(i)){case"function":i(function(t){return function(t){return e.resolve(t)}}(this));break;case"object":r=t.ajax(t.extend({},n.ajaxDefaults,i));break;case"array":e.resolve(i);break;default:e.resolve([])}return r||(r=e.promise()),"pending"===!r.state()&&(this.calendar.pushLoading(),r.always(function(){return this.calendar.popLoading()})),r},n.prototype.getResourceById=function(t){return this.resourcesById[t]},n.prototype.unsetResources=function(){return this.topLevelResources=[],this.resourcesById={}},n.prototype.setResources=function(t){var e,n,r,i,o,s;for(this.unsetResources(),o=function(){var e,n,r;for(r=[],e=0,n=t.length;n>e;e++)i=t[e],r.push(this.buildResource(i));return r}.call(this),s=function(){var t,e,n;for(n=[],t=0,e=o.length;e>t;t++)r=o[t],this.addResourceToIndex(r)&&n.push(r);return n}.call(this),e=0,n=s.length;n>e;e++)r=s[e],this.addResourceToTree(r);return this.calendar.trigger("resourcesSet",null,this.topLevelResources)},n.prototype.addResource=function(e){return t.when(this.fetching).then(function(t){return function(){var n;return n=t.buildResource(e),t.addResourceToIndex(n)?(t.addResourceToTree(n),t.trigger("add",n),n):!1}}(this))},n.prototype.addResourceToIndex=function(t){var e,n,r,i;if(this.resourcesById[t.id])return!1;for(this.resourcesById[t.id]=t,i=t.children,n=0,r=i.length;r>n;n++)e=i[n],this.addResourceToIndex(e);return!0},n.prototype.addResourceToTree=function(t){var e,n,r;if(!t.parent){if(n=String(t[this.getResourceParentField()]||"")){if(e=this.resourcesById[n],!e)return!1;t.parent=e,r=e.children}else r=this.topLevelResources;r.push(t)}return!0},n.prototype.removeResource=function(e){var n;return n="object"==typeof e?e.id:e,t.when(this.fetching).then(function(t){return function(){var e;return e=t.removeResourceFromIndex(n),e&&(t.removeResourceFromTree(e),t.trigger("remove",e)),e}}(this))},n.prototype.removeResourceFromIndex=function(t){var e,n,r,i,o;if(o=this.resourcesById[t]){for(delete this.resourcesById[t],i=o.children,n=0,r=i.length;r>n;n++)e=i[n],this.removeResourceFromIndex(e.id);return o}return!1},n.prototype.removeResourceFromTree=function(t,e){var n,r,i,o;for(null==e&&(e=this.topLevelResources),n=r=0,i=e.length;i>r;n=++r){if(o=e[n],o===t)return t.parent=null,e.splice(n,1),!0;if(this.removeResourceFromTree(t,o.children))return!0}return!1},n.prototype.buildResource=function(e){var r,i,o,s,a;return a=t.extend({},e),a.id=String((null!=(s=e.id)?s:"_fc"+n.resourceGuid++)||""),o=e.eventClassName,a.eventClassName=function(){switch(t.type(o)){case"string":return o.split(/\s+/);case"array":return o;default:return[]}}(),a.children=function(){var t,n,o,s,l;for(s=null!=(o=e.children)?o:[],l=[],t=0,n=s.length;n>t;t++)i=s[t],r=this.buildResource(i),r.parent=a,l.push(r);return l}.call(this),a},n.prototype.getResourceParentField=function(){return this.calendar.options.resourceParentField||"parentId"},n.prototype.getEventResourceId=function(t){return String(t[this.getEventResourceField()]||"")},n.prototype.setEventResourceId=function(t,e){return t[this.getEventResourceField()]=String(e||"")},n.prototype.getEventResourceField=function(){return this.calendar.options.eventResourceField||"resourceId"},n}(o),_=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return Et(n,e),n.prototype.displayingResources=null,n.prototype.assigningResources=null,n.prototype.displayView=function(){return t.when(n.__super__.displayView.apply(this,arguments)).then(function(t){return function(){return t.displayResources()}}(this))},n.prototype.displayEvents=function(e){return t.when(this.displayResources()).then(function(t){return function(){return n.__super__.displayEvents.call(t,e)}}(this))},n.prototype.unrenderSkeleton=function(){return this.clearResources()},n.prototype.displayResources=function(){return this.listenToResources(),t.when(this.displayingResources).then(function(t){return function(){return t.displayingResources||(t.displayingResources=t.assignResources().then(function(){return t.renderStoredResources()}))}}(this))},n.prototype.clearResources=function(){var e;return e=this.displayingResources,e?e.then(function(t){return function(){return t.clearEvents(),t.unrenderStoredResources(),t.displayingResources=null}}(this)):t.when()},n.prototype.redisplayResources=function(){var t;return t=this.queryScroll(),this.clearResources().then(function(t){return function(){return t.displayResources()}}(this)).then(function(e){return function(){return e.setScroll(t),e.calendar.rerenderEvents()}}(this))},n.prototype.resetResources=function(t){var e;return this.displayingResources?(e=this.queryScroll(),this.clearResources().then(function(t){return function(){return t.unassignResources()}}(this)).then(function(e){return function(){return e.assignResources(t)}}(this)).then(function(t){return function(){return t.displayResources()}}(this)).then(function(t){return function(){return t.setScroll(e),t.calendar.rerenderEvents()}}(this))):this.unassignResources().then(function(e){return function(){return e.assignResources(t)}}(this))},n.prototype.assignResources=function(e){return this.assigningResources||(this.assigningResources=t.when(e||this.calendar.resourceManager.getResources()).then(function(t){return function(e){return t.setResources(e)}}(this)))},n.prototype.unassignResources=function(){var e;return e=this.assigningResources,e?e.then(function(t){return function(){return t.unsetResources(),t.assigningResources=null}}(this)):t.when()},n.prototype.setResources=function(t){},n.prototype.unsetResources=function(){},n.prototype.renderStoredResources=function(){},n.prototype.unrenderStoredResources=function(){},n.prototype.triggerDayClick=function(t,e,n){var r;return r=this.calendar.resourceManager,this.trigger("dayClick",e,t.start,n,this,r.getResourceById(t.resourceId))},n.prototype.triggerSelect=function(t,e){var n;return n=this.calendar.resourceManager,this.trigger("select",null,t.start,t.end,e,this,n.getResourceById(t.resourceId))},n}(j),w=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Et(e,t),e.prototype.eventsToRanges=function(t){var n,r,i,o;for(r=e.__super__.eventsToRanges.apply(this,arguments),i=0,o=r.length;o>i;i++)n=r[i],n.resourceId=this.view.calendar.getEventResourceId(n.event);return r},e.prototype.eventRangeToSegs=function(t){var n,r,i,o,s;if(s=e.__super__.eventRangeToSegs.apply(this,arguments),i=t.resourceId)for(n=0,r=s.length;r>n;n++)o=s[n],o.resourceId=i;return s},e.prototype.selectionRangeToSegs=function(t){var n,r,i,o,s;if(s=e.__super__.selectionRangeToSegs.apply(this,arguments),i=t.resourceId)for(n=0,r=s.length;r>n;n++)o=s[n],o.resourceId=i;return s},e.prototype.fabricateHelperEvent=function(t,n){var r;return r=e.__super__.fabricateHelperEvent.apply(this,arguments),this.view.calendar.resourceManager.setEventResourceId(r,t.resourceId),r},e.prototype.computeEventDrop=function(t,n,r){var i,o;return n.resourceId?(i=!0,i||t.resourceId===n.resourceId?(o=e.__super__.computeEventDrop.apply(this,arguments),o&&(o.resourceId=n.resourceId),o):null):null},e.prototype.computeExternalDrop=function(t,n){var r;return t.resourceId?(r=e.__super__.computeExternalDrop.apply(this,arguments),r&&(r.resourceId=t.resourceId),r):null},e.prototype.computeEventResize=function(t,n,r,i){var o;return o=e.__super__.computeEventResize.apply(this,arguments),o&&(o.resourceId=n.resourceId),o},e.prototype.computeSelection=function(t,n){var r;return r=e.__super__.computeSelection.apply(this,arguments),r&&(r.resourceId=t.resourceId),r},e}(d),L=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Et(e,t),e.prototype.timeGrid=null,e.prototype.isScrolled=!1,e.prototype.initialize=function(){return this.timeGrid=this.instantiateGrid(),this.intervalDuration=this.timeGrid.duration,this.coordMap=this.timeGrid.coordMap},e.prototype.instantiateGrid=function(){return new $(this)},e.prototype.setRange=function(t){return e.__super__.setRange.apply(this,arguments),this.timeGrid.setRange(t)},e.prototype.renderSkeleton=function(){return this.el.addClass("fc-timeline"),this.opt("eventOverlap")===!1&&this.el.addClass("fc-no-overlap"),this.el.html(this.renderSkeletonHtml()),this.renderTimeGridSkeleton()},e.prototype.renderSkeletonHtml=function(){return'<table> <thead class="fc-head"> <tr> <td class="fc-time-area '+this.widgetHeaderClass+'"></td> </tr> </thead> <tbody class="fc-body"> <tr> <td class="fc-time-area '+this.widgetContentClass+'"></td> </tr> </tbody> </table>'},e.prototype.renderTimeGridSkeleton=function(){return this.timeGrid.setElement(this.el.find("tbody .fc-time-area")),this.timeGrid.headEl=this.el.find("thead .fc-time-area"),this.timeGrid.renderSkeleton(),this.isScrolled=!1,this.timeGrid.bodyScroller.on("scroll",vt(this,"handleBodyScroll"))},e.prototype.handleBodyScroll=function(t,e){if(t){if(!this.isScrolled)return this.isScrolled=!0,this.el.addClass("fc-scrolled")}else if(this.isScrolled)return this.isScrolled=!1,this.el.removeClass("fc-scrolled")},e.prototype.unrenderSkeleton=function(){return this.timeGrid.removeElement(),this.handleBodyScroll(0),e.__super__.unrenderSkeleton.apply(this,arguments)},e.prototype.renderDates=function(){return this.timeGrid.renderDates()},e.prototype.unrenderDates=function(){return this.timeGrid.unrenderDates()},e.prototype.renderBusinessHours=function(){return this.timeGrid.renderBusinessHours()},e.prototype.unrenderBusinessHours=function(){return this.timeGrid.unrenderBusinessHours()},e.prototype.updateWidth=function(){return this.timeGrid.updateWidth()},e.prototype.setHeight=function(t,e){var n;return n=e?"auto":t-this.timeGrid.headHeight()-this.queryMiscHeight(),this.timeGrid.bodyScroller.setHeight(n)},e.prototype.queryMiscHeight=function(){return this.el.outerHeight()-this.timeGrid.headScroller.el.outerHeight()-this.timeGrid.bodyScroller.el.outerHeight()},e.prototype.computeInitialScroll=function(t){return this.timeGrid.computeInitialScroll(t)},e.prototype.queryScroll=function(){return this.timeGrid.queryScroll()},e.prototype.setScroll=function(t){return this.timeGrid.setScroll(t)},e.prototype.renderEvents=function(t){return this.timeGrid.renderEvents(t),this.updateWidth()},e.prototype.unrenderEvents=function(){return this.timeGrid.unrenderEvents(),this.updateWidth()},e.prototype.renderDrag=function(t,e){return this.timeGrid.renderDrag(t,e)},e.prototype.unrenderDrag=function(){return this.timeGrid.unrenderDrag()},e.prototype.getEventSegs=function(){return this.timeGrid.getEventSegs()},e.prototype.renderSelection=function(t){return this.timeGrid.renderSelection(t)},e.prototype.unrenderSelection=function(){return this.timeGrid.unrenderSelection()},e}(j),U=c.cssToStr,$=function(n){function r(){var t;r.__super__.constructor.apply(this,arguments),this.initScaleProps(),this.minTime=e.duration(this.opt("minTime")||"00:00"),this.maxTime=e.duration(this.opt("maxTime")||"24:00"),this.snapDuration=(t=this.opt("snapDuration"))?e.duration(t):this.slotDuration,this.cellDuration=this.snapDuration,this.colsPerSlot=J(this.slotDuration,this.snapDuration),this.slotWidth=this.opt("slotWidth")}return Et(r,n),r.prototype.slotDates=null,r.prototype.headEl=null,r.prototype.slatContainerEl=null,r.prototype.slatEls=null,r.prototype.slatElCoords=null,r.prototype.headScroller=null,r.prototype.bodyScroller=null,r.prototype.joiner=null,r.prototype.follower=null,r.prototype.eventTitleFollower=null,r.prototype.minTime=null,r.prototype.maxTime=null,r.prototype.slotDuration=null,r.prototype.snapDuration=null,r.prototype.slotCnt=null,r.prototype.snapDiffToCol=null,r.prototype.colToSnapDiff=null,r.prototype.colsPerSlot=null,r.prototype.duration=null,r.prototype.labelInterval=null,r.prototype.headerFormats=null,r.prototype.isTimeScale=null,r.prototype.emphasizeWeeks=!1,r.prototype.titleFollower=null,r.prototype.segContainerEl=null,r.prototype.segContainerHeight=null,r.prototype.bgSegContainerEl=null,r.prototype.helperEls=null,r.prototype.innerEl=null,r.prototype.opt=function(t){return this.view.opt(t)},r.prototype.isValidDate=function(t){var e;return this.view.isHiddenDay(t)?!1:this.isTimeScale?(e=t.time(),e>=this.minTime&&e<this.maxTime):!0},r.prototype.computeDisplayEventTime=function(){return!this.isTimeScale},r.prototype.computeDisplayEventEnd=function(){return!1},r.prototype.computeEventTimeFormat=function(){return this.opt("extraSmallTimeFormat")},r.prototype.normalizeGridDate=function(t){return this.isTimeScale?this.view.calendar.rezoneDate(t):this.largeUnit?t.clone().startOf(this.largeUnit):t.clone().stripTime()},r.prototype.rangeUpdated=function(){var t,e;for(this.start=this.normalizeGridDate(this.start),this.end=this.normalizeGridDate(this.end),e=[],t=this.start.clone();t<this.end;)this.isValidDate(t)&&e.push(t.clone()),t.add(this.slotDuration);return this.slotDates=e,this.updateGridDates()},r.prototype.updateGridDates=function(){var t,e,n,r,i;for(t=-1,i=0,r=[],e=[],n=this.start.clone();n<this.end;)this.isValidDate(n)?(t++,r.push(t),e.push(i)):r.push(t+.5),n.add(this.snapDuration),i++;return this.snapDiffToCol=r,this.colToSnapDiff=e,this.colCnt=t+1},r.prototype.build=function(){return this.rowCnt=1},r.prototype.getRowEl=function(){return this.bodyScroller.contentEl},r.prototype.getCellDayEl=function(t){return this.slatEls.eq(Math.floor(t.col/this.colsPerSlot))},r.prototype.computeColCoords=function(){var t,e;for(t=[],e=this.start.clone();e<this.end;)this.isValidDate(e)&&t.push(this.rangeToOffsets({start:e,end:e.clone().add(this.snapDuration)})),e.add(this.snapDuration);return t},r.prototype.computeCellRange=function(t){var e,n;return n=this.start.clone(),n.add(pt(this.snapDuration,this.colToSnapDiff[t.col])),e=n.clone().add(this.snapDuration),{start:n,end:e}},r.prototype.rangeToSegs=function(t){var e,n,r,i;return this.isTimeScale?r=t:(r=this.view.computeDayRange(t),this.largeUnit&&(n=r.start.clone().startOf(this.largeUnit),e=r.end.clone().startOf(this.largeUnit),e.isSame(r.end)&&e.isAfter(n)||e.add(this.slotDuration),r={start:n,end:e})),i=lt(r,this.view),i?(i.isStart&&!this.isValidDate(i.start)&&(i.isStart=!1),i.isEnd&&i.end&&!this.isValidDate(i.end.clone().subtract(1))&&(i.isEnd=!1),[i]):[]},r.prototype.renderSkeleton=function(){return this.headScroller=new F("invisible-scroll","hidden"),this.headEl.append(this.headScroller.el),this.bodyScroller=new F,this.el.append(this.bodyScroller.el),this.innerEl=this.bodyScroller.contentEl,this.slatContainerEl=t('<div class="fc-slats"/>').appendTo(this.bodyScroller.bgEl),this.segContainerEl=t('<div class="fc-event-container"/>').appendTo(this.bodyScroller.contentEl),this.bgSegContainerEl=this.bodyScroller.bgEl,this.coordMap.containerEl=this.bodyScroller.scrollEl,this.joiner=new H("horizontal",[this.headScroller,this.bodyScroller]),
this.follower=new R(this.headScroller),this.eventTitleFollower=new R(this.bodyScroller),this.eventTitleFollower.minTravel=50,this.isRTL?this.eventTitleFollower.containOnNaturalRight=!0:this.eventTitleFollower.containOnNaturalLeft=!0,r.__super__.renderSkeleton.apply(this,arguments)},r.prototype.headColEls=null,r.prototype.slatColEls=null,r.prototype.renderDates=function(){var t,e,n,r,i,o;for(this.headScroller.contentEl.html(this.renderHeadHtml()),this.headColEls=this.headScroller.contentEl.find("col"),this.slatContainerEl.html(this.renderSlatHtml()),this.slatColEls=this.slatContainerEl.find("col"),this.slatEls=this.slatContainerEl.find("td"),o=function(t){return function(){return ft(t.headScroller.scrollEl,0),ft(t.bodyScroller.scrollEl,0)}}(this),o(),setTimeout(o,0),i=this.slotDates,e=n=0,r=i.length;r>n;e=++n)t=i[e],this.view.trigger("dayRender",null,t,this.slatEls.eq(e));return this.follower?this.follower.setSprites(this.headEl.find("tr:not(:last-child) span")):void 0},r.prototype.unrenderDates=function(){return this.follower&&this.follower.clearSprites(),this.headScroller.contentEl.empty(),this.slatContainerEl.empty(),this.headScroller.contentEl.add(this.bodyScroller.contentEl).css({minWidth:"",width:""})},r.prototype.renderHeadHtml=function(){var t,e,n,r,i,o,s,a,l,u,c,d,h,p,f,g,m,v,y,b,w,S,D,T,C,_,x,E,k,R,I,H,F,M,$,L;for(f=this.labelInterval,i=this.headerFormats,e=function(){var t,e,n;for(n=[],t=0,e=i.length;e>t;t++)r=i[t],n.push([]);return n}(),g=null,E=null,M=this.slotDates,F=[],d=0,m=M.length;m>d;d++){for(n=M[d],L=n.week(),c=this.emphasizeWeeks&&null!==E&&E!==L,R=h=0,v=i.length;v>h;R=++h)r=i[R],I=e[R],g=I[I.length-1],u=i.length>1&&R<i.length-1,_=null,u?($=n.format(r),g&&g.text===$?g.colspan+=1:_={text:$,colspan:1}):!g||ct(X(this.start,n,f))?($=n.format(r),_={text:$,colspan:1}):g.colspan+=1,_&&(_.weekStart=c,I.push(_));F.push({weekStart:c}),E=L}for(a=f>this.slotDuration,o="<table>",o+="<colgroup>",p=0,y=M.length;y>p;p++)n=M[p],o+="<col/>";for(o+="</colgroup>",o+="<tbody>",s=T=0,b=e.length;b>T;s=++T){for(I=e[s],l=s===e.length-1,o+="<tr"+(a&&l?' class="fc-chrono"':"")+">",C=0,w=I.length;w>C;C++)t=I[C],o+='<th class="'+this.view.widgetHeaderClass+" "+(t.weekStart?"fc-em-cell":"")+'"'+(t.colspan>1?' colspan="'+t.colspan+'"':"")+'><div class="fc-cell-content"><span class="fc-cell-text">'+st(t.text)+"</span></div></th>";o+="</tr>"}for(o+="</tbody></table>",H="<table>",H+="<colgroup>",x=0,S=F.length;S>x;x++)t=F[x],H+="<col/>";for(H+="</colgroup>",H+="<tbody><tr>",s=k=0,D=F.length;D>k;s=++k)t=F[s],n=M[s],H+=this.slatCellHtml(n,t.weekStart);return H+="</tr></tbody></table>",this._slatHtml=H,o},r.prototype.renderSlatHtml=function(){return this._slatHtml},r.prototype.slatCellHtml=function(t,e){var n;return this.isTimeScale?(n=[],n.push(ct(X(this.start,t,this.labelInterval))?"fc-major":"fc-minor")):(n=this.getDayClasses(t),n.push("fc-day")),n.unshift(this.view.widgetContentClass),e&&n.push("fc-em-cell"),'<td class="'+n.join(" ")+'" data-date="'+t.format()+'"><div /></td>'},r.prototype.businessHourSegs=null,r.prototype.renderBusinessHours=function(){var t,e;return this.largeUnit?void 0:(t=this.view.calendar.getBusinessHoursEvents(!this.isTimeScale),e=this.businessHourSegs=this.eventsToSegs(t),this.renderFill("businessHours",e,"bgevent"))},r.prototype.unrenderBusinessHours=function(){return this.unrenderFill("businessHours")},r.prototype.explicitSlotWidth=null,r.prototype.defaultSlotWidth=null,r.prototype.updateWidth=function(){var t,e,n,r,i;return i=Math.round(this.slotWidth||(this.slotWidth=this.computeSlotWidth())),n=i*this.slotDates.length,e="",r=i,t=this.bodyScroller.scrollEl[0].clientWidth,t>n&&(e=t,n="",r=Math.floor(t/this.slotDates.length)),this.headScroller.setContentWidth(n),this.headScroller.setContentMinWidth(e),this.bodyScroller.setContentWidth(n),this.bodyScroller.setContentMinWidth(e),this.headColEls.slice(0,-1).add(this.slatColEls.slice(0,-1)).width(r),this.headScroller.update(),this.bodyScroller.update(),this.joiner.update(),this.updateSlatElCoords(),this.updateSegPositions(),this.follower&&this.follower.update(),this.eventTitleFollower?this.eventTitleFollower.update():void 0},r.prototype.computeSlotWidth=function(){var e,n,r,i,o,s;return r=0,n=this.headEl.find("tr:last-child th span"),n.each(function(e,n){var i;return i=t(n).outerWidth(),r=Math.max(r,i)}),e=r+1,s=J(this.labelInterval,this.slotDuration),o=Math.ceil(e/s),i=this.headColEls.eq(0).css("min-width"),i&&(i=parseInt(i,10),i&&(o=Math.max(o,i))),o},r.prototype.updateSlatElCoords=function(){var e,n,r,i,o,s;return n=this.slatEls.find("> div"),o=this.bodyScroller.innerEl,this.isRTL?(i=o.offset().left+o.outerWidth(),e=function(){var e,o,a;for(a=[],r=e=0,o=n.length;o>e;r=++e)s=n[r],a.push(t(s).offset().left+t(s).outerWidth()-i);return a}(),e[r]=t(s).offset().left-i):(i=o.offset().left,e=function(){var e,o,a;for(a=[],r=e=0,o=n.length;o>e;r=++e)s=n[r],a.push(t(s).offset().left-i);return a}(),e[r]=t(s).offset().left+t(s).outerWidth()-i),this.slatElCoords=e},r.prototype.dateToCol=function(t){var e,n,r,i;return n=X(this.start,t,this.snapDuration),0>n?0:n>=this.snapDiffToCol.length?this.colCnt:(r=Math.floor(n),i=n-r,e=this.snapDiffToCol[r],ct(e)&&i&&(e+=i),e)},r.prototype.dateToCoord=function(t){var e,n,r,i,o,s,a,l;return e=this.dateToCol(t),l=e/this.colsPerSlot,l=Math.max(l,0),l=Math.min(l,this.slotDates.length),ct(l)?this.slatElCoords[l]:(i=Math.floor(l),o=+this.slotDates[i],s=+this.slotDates[i].clone().add(this.slotDuration),a=(t-o)/(s-o),a=Math.min(a,1),n=this.slatElCoords[i],r=this.slatElCoords[i+1],n+(r-n)*a)},r.prototype.rangeToCoords=function(t){return this.isRTL?{right:this.dateToCoord(t.start),left:this.dateToCoord(t.end)}:{left:this.dateToCoord(t.start),right:this.dateToCoord(t.end)}},r.prototype.rangeToOffsets=function(t){var e,n;return e=this.rangeToCoords(t),n=this.isRTL?this.slatContainerEl.offset().left+this.slatContainerEl.outerWidth():this.slatContainerEl.offset().left,e.left+=n,e.right+=n,e},r.prototype.headHeight=function(){var t;return t=this.headScroller.contentEl.find("table"),t.height.apply(t,arguments)},r.prototype.updateSegPositions=function(){var t,e,n,r,i;for(i=(this.segs||[]).concat(this.businessHourSegs||[]),e=0,n=i.length;n>e;e++)r=i[e],t=this.rangeToCoords(r,-1),r.el.css({left:r.left=t.left,right:-(r.right=t.right)})},r.prototype.computeInitialScroll=function(t){var n,r;return n=0,this.isTimeScale&&(r=this.opt("scrollTime"),r&&(r=e.duration(r),n=this.dateToCoord(this.start.clone().time(r)))),{left:n,top:0}},r.prototype.queryScroll=function(){return{left:ft(this.bodyScroller.scrollEl),top:this.bodyScroller.scrollEl.scrollTop()}},r.prototype.setScroll=function(t){return ft(this.bodyScroller.scrollEl,t.left),this.bodyScroller.scrollEl.scrollTop(t.top)},r.prototype.renderFgSegs=function(t){return t=this.renderFgSegEls(t),this.renderFgSegsInContainers([[this,t]]),this.updateSegFollowers(t),t},r.prototype.unrenderFgSegs=function(){return this.clearSegFollowers(),this.unrenderFgContainers([this])},r.prototype.renderFgSegsInContainers=function(t){var e,n,r,i,o,s,a,l,u,c,d,h,p,f,g,m,v,y,b,w,S,D,T,C,_;for(r=0,s=t.length;s>r;r++)for(b=t[r],e=b[0],_=b[1],i=0,a=_.length;a>i;i++)C=_[i],n=this.rangeToCoords(C,-1),C.el.css({left:C.left=n.left,right:-(C.right=n.right)});for(o=0,l=t.length;l>o;o++)for(w=t[o],e=w[0],_=w[1],f=0,u=_.length;u>f;f++)C=_[f],C.el.appendTo(e.segContainerEl);for(g=0,c=t.length;c>g;g++){for(S=t[g],e=S[0],_=S[1],m=0,d=_.length;d>m;m++)C=_[m],C.height=C.el.outerHeight(!0);this.buildSegLevels(_),e.segContainerHeight=G(_)}for(T=[],v=0,h=t.length;h>v;v++){for(D=t[v],e=D[0],_=D[1],y=0,p=_.length;p>y;y++)C=_[y],C.el.css("top",C.top);T.push(e.segContainerEl.height(e.segContainerHeight))}return T},r.prototype.buildSegLevels=function(t){var e,n,r,i,o,s,a,l,u,c,d,h,p,f;for(p=[],this.sortSegs(t),r=0,s=t.length;s>r;r++){for(f=t[r],f.above=[],u=0;u<p.length;){for(n=!1,d=p[u],i=0,a=d.length;a>i;i++)c=d[i],Ct(f,c)&&(f.above.push(c),n=!0);if(!n)break;u+=1}for((p[u]||(p[u]=[])).push(f),u+=1;u<p.length;){for(h=p[u],o=0,l=h.length;l>o;o++)e=h[o],Ct(f,e)&&e.above.push(f);u+=1}}return p},r.prototype.unrenderFgContainers=function(t){var e,n,r,i;for(i=[],n=0,r=t.length;r>n;n++)e=t[n],e.segContainerEl.empty(),e.segContainerEl.height(""),i.push(e.segContainerHeight=null);return i},r.prototype.fgSegHtml=function(t,e){var n,r,i,o,s,a;return r=t.event,i=this.view.isEventDraggable(r),s=t.isStart&&this.view.isEventResizableFromStart(r),o=t.isEnd&&this.view.isEventResizableFromEnd(r),n=this.getSegClasses(t,i,s||o),n.unshift("fc-timeline-event","fc-h-event"),a=this.getEventTimeText(r),'<a class="'+n.join(" ")+'" style="'+U(this.getEventSkinCss(r))+'"'+(r.url?' href="'+st(r.url)+'"':"")+'><div class="fc-content">'+(a?'<span class="fc-time">'+st(a)+"</span>":"")+'<span class="fc-title">'+(r.title?st(r.title):"&nbsp;")+'</span></div><div class="fc-bg" />'+(s?'<div class="fc-resizer fc-start-resizer"></div>':"")+(o?'<div class="fc-resizer fc-end-resizer"></div>':"")+"</a>"},r.prototype.updateSegFollowers=function(t){var e,n,r,i,o;if(this.eventTitleFollower){for(i=[],e=0,n=t.length;n>e;e++)r=t[e],o=r.el.find(".fc-title"),o.length&&i.push(new I(o));return this.eventTitleFollower.setSprites(i)}},r.prototype.clearSegFollowers=function(){return this.eventTitleFollower?this.eventTitleFollower.clearSprites():void 0},r.prototype.segDragStart=function(){return r.__super__.segDragStart.apply(this,arguments),this.eventTitleFollower?this.eventTitleFollower.forceRelative():void 0},r.prototype.segDragEnd=function(){return r.__super__.segDragEnd.apply(this,arguments),this.eventTitleFollower?this.eventTitleFollower.clearForce():void 0},r.prototype.segResizeStart=function(){return r.__super__.segResizeStart.apply(this,arguments),this.eventTitleFollower?this.eventTitleFollower.forceRelative():void 0},r.prototype.segResizeEnd=function(){return r.__super__.segResizeEnd.apply(this,arguments),this.eventTitleFollower?this.eventTitleFollower.clearForce():void 0},r.prototype.renderHelper=function(t,e){var n;return n=this.eventsToSegs([t]),n=this.renderFgSegEls(n),this.renderHelperSegsInContainers([[this,n]],e)},r.prototype.renderHelperSegsInContainers=function(e,n){var r,i,o,s,a,l,u,c,d,h,p,f,g,m,v,y,b;for(s=[],a=0,c=e.length;c>a;a++)for(g=e[a],r=g[0],b=g[1],l=0,d=b.length;d>l;l++)y=b[l],i=this.rangeToCoords(y,-1),y.el.css({left:y.left=i.left,right:-(y.right=i.right)}),n&&n.resourceId===(null!=(m=r.resource)?m.id:void 0)?y.el.css("top",n.el.css("top")):y.el.css("top",0);for(u=0,h=e.length;h>u;u++)for(v=e[u],r=v[0],b=v[1],o=t('<div class="fc-event-container fc-helper-container"/>').appendTo(r.innerEl),s.push(o[0]),f=0,p=b.length;p>f;f++)y=b[f],o.append(y.el);return this.helperEls=this.helperEls?this.helperEls.add(t(s)):t(s)},r.prototype.unrenderHelper=function(){return this.helperEls?(this.helperEls.remove(),this.helperEls=null):void 0},r.prototype.renderEventResize=function(t,e){return this.renderHighlight(this.eventRangeToSegs(t)),this.renderRangeHelper(t,e)},r.prototype.unrenderEventResize=function(){return this.unrenderHighlight(),this.unrenderHelper()},r.prototype.renderFill=function(t,e,n){return e=this.renderFillSegEls(t,e),this.renderFillInContainers(t,[[this,e]],n),e},r.prototype.renderFillInContainers=function(t,e,n){var r,i,o,s,a,l;for(a=[],i=0,o=e.length;o>i;i++)s=e[i],r=s[0],l=s[1],a.push(this.renderFillInContainer(t,r,l,n));return a},r.prototype.renderFillInContainer=function(e,n,r,i){var o,s,a,l,u;if(r.length){for(i||(i=e.toLowerCase()),o=t('<div class="fc-'+i+'-container" />').appendTo(n.bgSegContainerEl),a=0,l=r.length;l>a;a++)u=r[a],s=this.rangeToCoords(u,-1),u.el.css({left:u.left=s.left,right:-(u.right=s.right)}),u.el.appendTo(o);return this.elsByFill[e]=this.elsByFill[e]?this.elsByFill[e].add(o):o}},r.prototype.renderDrag=function(t,e){return e?(this.renderRangeHelper(t,e),this.applyDragOpacity(this.helperEls),!0):(this.renderHighlight(this.eventRangeToSegs(t)),!1)},r.prototype.unrenderDrag=function(){return this.unrenderHelper(),this.unrenderHighlight()},r}(d),G=function(t){var e,n,r,i;for(r=0,e=0,n=t.length;n>e;e++)i=t[e],r=Math.max(r,Y(i));return r},Y=function(t){return null==t.top&&(t.top=G(t.above)),t.top+t.height},Ct=function(t,e){return t.left<e.right&&t.right>e.left},v=18,g=6,f=200,m=1e3,s={months:1},k=[{years:1},{months:1},{days:1},{hours:1},{minutes:30},{minutes:15},{minutes:10},{minutes:5},{minutes:1},{seconds:30},{seconds:15},{seconds:10},{seconds:5},{seconds:1},{milliseconds:500},{milliseconds:100},{milliseconds:10},{milliseconds:1}],$.prototype.initScaleProps=function(){var e,n,r;return this.labelInterval=this.queryDurationOption("slotLabelInterval"),this.slotDuration=this.queryDurationOption("slotDuration"),this.ensureGridDuration(),this.validateLabelAndSlot(),this.ensureLabelInterval(),this.ensureSlotDuration(),e=this.opt("slotLabelFormat"),r=t.type(e),this.headerFormats="array"===r?e:"string"===r?[e]:this.computeHeaderFormats(),this.isTimeScale=Z(this.slotDuration),this.largeUnit=this.isTimeScale?void 0:(n=B(this.slotDuration),/year|month|week/.test(n)?n:void 0),this.emphasizeWeeks=1===this.slotDuration.as("days")&&this.duration.as("weeks")>=2&&!this.opt("businessHours")},$.prototype.queryDurationOption=function(t){var n,r;return r=this.opt(t),null!=r&&(n=e.duration(r),+n)?n:void 0},$.prototype.validateLabelAndSlot=function(){var t,e,n;return this.labelInterval&&(t=J(this.duration,this.labelInterval),t>m&&(c.warn("slotLabelInterval results in too many cells"),this.labelInterval=null)),this.slotDuration&&(e=J(this.duration,this.slotDuration),e>m&&(c.warn("slotDuration results in too many cells"),this.slotDuration=null)),this.labelInterval&&this.slotDuration&&(n=J(this.labelInterval,this.slotDuration),!ct(n)||1>n)?(c.warn("slotLabelInterval must be a multiple of slotDuration"),this.slotDuration=null):void 0},$.prototype.ensureGridDuration=function(){var t,n,r,i,o;if(t=this.duration,!t){if(t=this.view.intervalDuration,!t)if(this.labelInterval||this.slotDuration)for(o=this.ensureLabelInterval(),r=k.length-1;r>=0&&(n=k[r],t=e.duration(n),i=J(t,o),!(i>=v));r+=-1);else t=e.duration(s);this.duration=t}return t},$.prototype.ensureLabelInterval=function(){var t,n,r,i,o,s,a,l,u;if(o=this.labelInterval,!o){if(this.duration||this.slotDuration||this.ensureGridDuration(),this.slotDuration){for(n=0,s=k.length;s>n;n++)if(t=k[n],u=e.duration(t),l=J(u,this.slotDuration),ct(l)&&g>=l){o=u;break}o||(o=this.slotDuration)}else for(r=0,a=k.length;a>r&&(t=k[r],o=e.duration(t),i=J(this.duration,o),!(i>=v));r++);this.labelInterval=o}return o},$.prototype.ensureSlotDuration=function(){var t,n,r,i,o,s,a,l;if(s=this.slotDuration,!s){for(r=this.ensureLabelInterval(),n=0,i=k.length;i>n;n++)if(t=k[n],l=e.duration(t),a=J(r,l),ct(a)&&a>1&&g>=a){s=l;break}s&&this.duration&&(o=J(this.duration,s),o>f&&(s=null)),s||(s=r),this.slotDuration=s}return s},$.prototype.computeHeaderFormats=function(){var t,e,n,r,i,o,s,a;switch(s=this.view,r=this.duration,i=this.labelInterval,o=B(i),a=this.opt("weekNumbers"),t=e=n=null,"week"!==o||a||(o="day"),o){case"year":t="YYYY";break;case"month":r.asYears()>1&&(t="YYYY"),e="MMM";break;case"week":r.asYears()>1&&(t="YYYY"),e=this.opt("shortWeekFormat");break;case"day":r.asYears()>1?t=this.opt("monthYearFormat"):r.asMonths()>1&&(t="MMMM"),a&&(e=this.opt("weekFormat")),n=this.opt("smallDayDateFormat");break;case"hour":a&&(t=this.opt("weekFormat")),r.asDays()>1&&(e=this.opt("dayOfMonthFormat")),n=this.opt("smallTimeFormat");break;case"minute":i.asMinutes()/60>=g?(t=this.opt("hourFormat"),e="[:]mm"):t=this.opt("mediumTimeFormat");break;case"second":i.asSeconds()/60>=g?(t="LT",e="[:]ss"):t="LTS";break;case"millisecond":t="LTS",e="[.]SSS"}return[].concat(t||[],e||[],n||[])},c.views.timeline={"class":L,defaults:{eventResizableFromStart:!0}},c.views.timelineDay={type:"timeline",duration:{days:1}},c.views.timelineWeek={type:"timeline",duration:{weeks:1}},c.views.timelineMonth={type:"timeline",duration:{months:1}},c.views.timelineYear={type:"timeline",duration:{years:1}},C=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return Et(n,e),n.mixin(_),n.prototype.resourceGrid=null,n.prototype.joiner=null,n.prototype.dividerEls=null,n.prototype.superHeaderText=null,n.prototype.isVGrouping=null,n.prototype.isHGrouping=null,n.prototype.groupSpecs=null,n.prototype.colSpecs=null,n.prototype.orderSpecs=null,n.prototype.rowHierarchy=null,n.prototype.resourceRowHash=null,n.prototype.nestingCnt=0,n.prototype.isNesting=null,n.prototype.dividerWidth=null,n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.processResourceOptions(),this.resourceGrid=new M(this),this.rowHierarchy=new E(this),this.resourceRowHash={}},n.prototype.instantiateGrid=function(){return new T(this)},n.prototype.processResourceOptions=function(){var t,e,n,r,i,o,s,a,l,u,c,d,h,p,f,g,m,v,y,b,w,S,D;for(t=this.opt("resourceColumns")||[],f=this.opt("resourceLabelText"),r="Resources",S=null,t.length?S=f:(D=this.opt("resourceText"),D||(D=function(t){return t.title||t.id}),t.push({labelText:f||r,text:D})),b=[],i=[],s=[],c=!1,u=!1,d=0,g=t.length;g>d;d++)n=t[d],n.group?i.push(n):b.push(n);for(b[0].isMain=!0,i.length?(s=i,c=!0):(a=this.opt("resourceGroupField"),a&&(u=!0,s.push({field:a,text:this.opt("resourceGroupText"),render:this.opt("resourceGroupRender")}))),e=gt(this.opt("resourceOrder")),w=[],h=0,m=e.length;m>h;h++){for(y=e[h],l=!1,p=0,v=s.length;v>p;p++)if(o=s[p],o.field===y.field){o.order=y.order,l=!0;break}l||w.push(y)}return this.superHeaderText=S,this.isVGrouping=c,this.isHGrouping=u,this.groupSpecs=s,this.colSpecs=i.concat(b),this.orderSpecs=w},n.prototype.renderSkeleton=function(){var t;return n.__super__.renderSkeleton.apply(this,arguments),this.renderResourceGridSkeleton(),t=function(t){return function(){return t.resourceGrid.bodyScroller.scrollTop(0),t.timeGrid.bodyScroller.scrollTop(0)}}(this),t(),setTimeout(t,0),this.joiner=new H("vertical",[this.resourceGrid.bodyScroller,this.timeGrid.bodyScroller]),this.initDividerMoving()},n.prototype.renderSkeletonHtml=function(){return'<table> <thead class="fc-head"> <tr> <td class="fc-resource-area '+this.widgetHeaderClass+'"></td> <td class="fc-divider fc-col-resizer '+this.widgetHeaderClass+'"></td> <td class="fc-time-area '+this.widgetHeaderClass+'"></td> </tr> </thead> <tbody class="fc-body"> <tr> <td class="fc-resource-area '+this.widgetContentClass+'"></td> <td class="fc-divider fc-col-resizer '+this.widgetHeaderClass+'"></td> <td class="fc-time-area '+this.widgetContentClass+'"></td> </tr> </tbody> </table>'},n.prototype.renderResourceGridSkeleton=function(){return this.resourceGrid.el=this.el.find("tbody .fc-resource-area"),this.resourceGrid.headEl=this.el.find("thead .fc-resource-area"),this.resourceGrid.renderSkeleton()},n.prototype.initDividerMoving=function(){var t;return this.dividerEls=this.el.find(".fc-divider"),this.dividerWidth=null!=(t=this.opt("resourceAreaWidth"))?t:this.resourceGrid.tableWidth,null!=this.dividerWidth&&this.positionDivider(this.dividerWidth),this.dividerEls.on("mousedown",function(t){return function(e){return t.dividerMousedown(e)}}(this))},n.prototype.dividerMousedown=function(t){var e,n,r,i,o;return n=this.opt("isRTL"),i=30,r=this.el.width()-30,o=this.getNaturalDividerWidth(),e=new a({dragStart:function(t){return function(){return t.dividerEls.addClass("fc-active")}}(this),drag:function(t){return function(e,s){var a;return a=n?o-e:o+e,a=Math.max(a,i),a=Math.min(a,r),t.dividerWidth=a,t.positionDivider(a),t.updateWidth()}}(this),dragStop:function(t){return function(){return t.dividerEls.removeClass("fc-active")}}(this)}),e.mousedown(t)},n.prototype.getNaturalDividerWidth=function(){return this.el.find(".fc-resource-area").width()},n.prototype.positionDivider=function(t){return this.el.find(".fc-resource-area").width(t)},n.prototype.renderEvents=function(t){return this.timeGrid.renderEvents(t),this.syncRowHeights(),this.updateWidth()},n.prototype.unrenderEvents=function(){return this.timeGrid.unrenderEvents(),this.syncRowHeights(),this.updateWidth()},n.prototype.updateWidth=function(){return n.__super__.updateWidth.apply(this,arguments),this.resourceGrid.updateWidth(),this.joiner.update(),this.cellFollower?this.cellFollower.update():void 0},n.prototype.updateHeight=function(t){return n.__super__.updateHeight.apply(this,arguments),t?this.syncRowHeights():void 0},n.prototype.setHeight=function(t,e){var n,r;return r=this.syncHeadHeights(),n=e?"auto":t-r-this.queryMiscHeight(),this.timeGrid.bodyScroller.setHeight(n),this.resourceGrid.bodyScroller.setHeight(n)},n.prototype.queryMiscHeight=function(){return this.el.outerHeight()-Math.max(this.resourceGrid.headScroller.el.outerHeight(),this.timeGrid.headScroller.el.outerHeight())-Math.max(this.resourceGrid.bodyScroller.el.outerHeight(),this.timeGrid.bodyScroller.el.outerHeight())},n.prototype.syncHeadHeights=function(){var t;return this.resourceGrid.headHeight("auto"),this.timeGrid.headHeight("auto"),t=Math.max(this.resourceGrid.headHeight(),this.timeGrid.headHeight()),this.resourceGrid.headHeight(t),this.timeGrid.headHeight(t),t},n.prototype.scrollToResource=function(t){return this.timeGrid.scrollToResource(t)},n.prototype.setResources=function(t){var e,n,r;for(this.batchRows(),e=0,n=t.length;n>e;e++)r=t[e],this.insertResource(r);return this.unbatchRows(),this.reinitializeCellFollowers()},n.prototype.unsetResources=function(){return this.batchRows(),this.rowHierarchy.removeChildren(),this.unbatchRows(),this.reinitializeCellFollowers()},n.prototype.addResource=function(t){return this.insertResource(t),this.reinitializeCellFollowers()},n.prototype.removeResource=function(t){var e;return e=this.getResourceRow(t.id),e?(this.batchRows(),e.remove(),this.unbatchRows(),this.reinitializeCellFollowers()):void 0},n.prototype.cellFollower=null,n.prototype.reinitializeCellFollowers=function(){var e,n,r,i,o,s;for(this.cellFollower&&this.cellFollower.clearSprites(),this.cellFollower=new R(this.resourceGrid.bodyScroller),this.cellFollower.isHFollowing=!1,this.cellFollower.isVFollowing=!0,i=[],o=this.rowHierarchy.getNodes(),n=0,r=o.length;r>n;n++)s=o[n],s instanceof P&&s.groupTd&&(e=s.groupTd.find(".fc-cell-content"),e.length&&i.push(e[0]));return this.cellFollower.setSprites(t(i))},n.prototype.insertResource=function(t,e){var n,r,i,o,s,a,l;for(l=new D(this,t),null==e&&(o=t.parentId,o&&(e=this.getResourceRow(o))),e?this.insertRowAsChild(l,e):this.insertRow(l),s=t.children,a=[],r=0,i=s.length;i>r;r++)n=s[r],a.push(this.insertResource(n,l));return a},n.prototype.insertRow=function(t,e,n){var r;return null==e&&(e=this.rowHierarchy),null==n&&(n=this.groupSpecs),n.length?(r=this.ensureResourceGroup(t,e,n[0]),r instanceof h?this.insertRowAsChild(t,r):this.insertRow(t,r,n.slice(1))):this.insertRowAsChild(t,e)},n.prototype.insertRowAsChild=function(t,e){return e.addChild(t,this.computeChildRowPosition(t,e))},n.prototype.computeChildRowPosition=function(t,e){var n,r,i,o,s,a;if(this.orderSpecs.length)for(s=e.children,r=i=0,o=s.length;o>i;r=++i)if(a=s[r],n=this.compareResources(a.resource||{},t.resource||{}),n>0)return r;return null},n.prototype.compareResources=function(t,e){return W(t,e,this.orderSpecs)},n.prototype.ensureResourceGroup=function(t,e,n){var r,i,o,s,a,l,u,c,d,p,f;if(o=(t.resource||{})[n.field],i=null,n.order)for(d=e.children,s=a=0,u=d.length;u>a;s=++a){if(f=d[s],r=Q(f.groupValue,o)*n.order,0===r){i=f;break}if(r>0)break}else for(p=e.children,s=l=0,c=p.length;c>l;s=++l)if(f=p[s],f.groupValue===o){i=f;break}return i||(i=this.isVGrouping?new P(this,n,o):new h(this,n,o),e.addChild(i,s)),i},n.prototype.pairSegsWithRows=function(t){var e,n,r,i,o,s,a,l;for(i=[],o={},e=0,n=t.length;n>e;e++)l=t[e],s=l.resourceId||"",a=this.getResourceRow(s),a&&(r=o[s],r||(r=[a,[]],i.push(r),o[s]=r),r[1].push(l));return i},n.prototype.rowAdded=function(t){var e,n;return t instanceof D&&(this.resourceRowHash[t.resource.id]=t),n=this.isNesting,e=Boolean(this.nestingCnt+=t.depth?1:0),n!==e&&(this.el.toggleClass("fc-nested",e),this.el.toggleClass("fc-flat",!e)),this.isNesting=e},n.prototype.rowRemoved=function(t){var e,n;return t instanceof D&&delete this.resourceRowHash[t.resource.id],n=this.isNesting,e=Boolean(this.nestingCnt-=t.depth?1:0),n!==e&&(this.el.toggleClass("fc-nested",e),this.el.toggleClass("fc-flat",!e)),this.isNesting=e},n.prototype.batchRowDepth=0,n.prototype.shownRowBatch=null,n.prototype.hiddenRowBatch=null,n.prototype.batchRows=function(){return this.batchRowDepth++?void 0:(this.shownRowBatch=[],this.hiddenRowBatch=[])},n.prototype.unbatchRows=function(){return--this.batchRowDepth?void 0:(this.hiddenRowBatch.length&&this.rowsHidden(this.hiddenRowBatch),this.shownRowBatch.length&&this.rowsShown(this.shownRowBatch),this.hiddenRowBatch=null,this.shownRowBatch=null)},n.prototype.rowShown=function(t){return this.shownRowBatch?this.shownRowBatch.push(t):this.rowsShown([t])},n.prototype.rowHidden=function(t){return this.hiddenRowBatch?this.hiddenRowBatch.push(t):this.rowsHidden([t])},n.prototype.rowsShown=function(t){return this.syncRowHeights(t),this.updateWidth()},n.prototype.rowsHidden=function(t){return this.updateWidth()},n.prototype.tbodyHash=null,n.prototype.renderStoredResources=function(){return this.tbodyHash={spreadsheet:this.resourceGrid.tbodyEl,event:this.timeGrid.tbodyEl},this.batchRows(),this.rowHierarchy.show(),this.unbatchRows(),this.reinitializeCellFollowers()},n.prototype.unrenderStoredResources=function(){return this.batchRows(),this.rowHierarchy.recursivelyUnrender(),this.unbatchRows(),this.reinitializeCellFollowers()},n.prototype.syncRowHeights=function(t,e){var n,r,i,o,s,a,l,u,c,d;for(null==e&&(e=!1),null==t&&(t=this.getVisibleRows()),a=0,u=t.length;u>a;a++)d=t[a],d.setTrInnerHeight("");for(s=function(){var r,i,o;for(o=[],r=0,i=t.length;i>r;r++)d=t[r],n=d.getMaxTrInnerHeight(),e&&(n+=n%2),o.push(n);return o}(),o=l=0,c=t.length;c>l;o=++l)d=t[o],d.setTrInnerHeight(s[o]);return!e&&(r=this.resourceGrid.tbodyEl.height(),i=this.timeGrid.tbodyEl.height(),Math.abs(r-i)>1)?this.syncRowHeights(t,!0):void 0},n.prototype.getVisibleRows=function(){var t,e,n,r,i;for(n=this.rowHierarchy.getRows(),r=[],t=0,e=n.length;e>t;t++)i=n[t],i.isShown&&r.push(i);return r},n.prototype.getEventRows=function(){var t,e,n,r,i;for(n=this.rowHierarchy.getRows(),r=[],t=0,e=n.length;e>t;t++)i=n[t],i instanceof u&&r.push(i);return r},n.prototype.getResourceRow=function(t){return this.resourceRowHash[t]},n}(L),T=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return Et(n,e),n.mixin(w),n.prototype.eventRows=null,n.prototype.shownEventRows=null,n.prototype.tbodyEl=null,n.prototype.build=function(){var t;return this.eventRows=this.view.getEventRows(),this.shownEventRows=function(){var e,n,r,i;for(r=this.eventRows,i=[],e=0,n=r.length;n>e;e++)t=r[e],t.isShown&&i.push(t);return i}.call(this),this.rowCnt=this.shownEventRows.length},n.prototype.clear=function(){return this.eventRows=null,this.shownEventRows=null},n.prototype.getRowData=function(t){return{resourceId:this.shownEventRows[t].resource.id}},n.prototype.getRowEl=function(t){return this.shownEventRows[t].getTr("event")},n.prototype.renderSkeleton=function(){var e;return n.__super__.renderSkeleton.apply(this,arguments),this.segContainerEl.remove(),this.segContainerEl=null,e=t('<div class="fc-rows"><table><tbody/></table></div>').appendTo(this.bodyScroller.contentEl),this.tbodyEl=e.find("tbody")},n.prototype.renderFgSegs=function(t){var e,n,r,i,o,s,a;for(t=this.renderFgSegEls(t),s=this.view.pairSegsWithRows(t),a=[],r=0,i=s.length;i>r;r++)o=s[r],e=o[0],n=o[1],e.fgSegs=n,e.isShown&&(e.isSegsRendered=!0,a.push(o));return this.renderFgSegsInContainers(a),this.updateSegFollowers(t),t},n.prototype.unrenderFgSegs=function(){var t,e,n,r;for(this.clearSegFollowers(),e=this.view.getEventRows(),n=0,r=e.length;r>n;n++)t=e[n],t.fgSegs=null,t.isSegsRendered=!1;return this.unrenderFgContainers(e)},n.prototype.renderFill=function(t,e,n){var r,i,o,s,a,l,u,c,d,h,p,f;for(e=this.renderFillSegEls(t,e),c=[],a=[],r=0,o=e.length;o>r;r++)p=e[r],p.resourceId?c.push(p):a.push(p);for(u=this.view.pairSegsWithRows(c),f=[],i=0,s=u.length;s>i;i++)l=u[i],d=l[0],h=l[1],"bgEvent"===t&&(d.bgSegs=h),d.isShown&&f.push(l);return a.length&&f.unshift([this,a]),this.renderFillInContainers(t,f,n),e},n.prototype.renderHelper=function(t,e){var n,r;return r=this.eventsToSegs([t]),r=this.renderFgSegEls(r),n=this.view.pairSegsWithRows(r),this.renderHelperSegsInContainers(n,e)},n.prototype.computeInitialScroll=function(t){var e;return e=n.__super__.computeInitialScroll.apply(this,arguments),t&&(e.resourceId=t.resourceId,e.bottom=t.bottom),e},n.prototype.queryScroll=function(){var t,e,r,i,o,s,a,l;for(l=n.__super__.queryScroll.apply(this,arguments),a=this.bodyScroller.scrollEl.offset().top,o=this.view.getVisibleRows(),r=0,i=o.length;i>r;r++)if(s=o[r],s.resource&&(t=s.getTr("event"),e=t.offset().top+t.outerHeight(),e>a)){l.resourceId=s.resource.id,l.bottom=e-a;break}return l},n.prototype.setScroll=function(t){var e,r,i,o;return t.resourceId&&(o=this.view.getResourceRow(t.resourceId),o&&(e=o.getTr("event"),e&&(i=this.bodyScroller.innerEl.offset().top,r=e.offset().top+e.outerHeight(),t.top=r-t.bottom-i))),n.__super__.setScroll.call(this,t)},n.prototype.scrollToResource=function(t){var e,n,r,i;return r=this.view.getResourceRow(t.id),r&&(e=r.getTr("event"))?(n=this.bodyScroller.innerEl.offset().top,i=e.offset().top-n,this.bodyScroller.scrollEl.scrollTop(i)):void 0},n}($),n=30,M=function(){function e(t){var e;this.view=t,this.isRTL=this.view.opt("isRTL"),this.givenColWidths=this.colWidths=function(){var t,n,r,i;for(r=this.view.colSpecs,i=[],t=0,n=r.length;n>t;t++)e=r[t],i.push(e.width);return i}.call(this)}return e.prototype.view=null,e.prototype.headEl=null,e.prototype.el=null,e.prototype.tbodyEl=null,e.prototype.headScroller=null,e.prototype.bodyScroller=null,e.prototype.joiner=null,e.prototype.colGroupHtml="",e.prototype.headTable=null,e.prototype.headColEls=null,e.prototype.headCellEls=null,e.prototype.bodyColEls=null,e.prototype.bodyTable=null,e.prototype.renderSkeleton=function(){return this.headScroller=new F("invisible-scroll","hidden"),this.headScroller.contentEl.html(this.renderHeadHtml()),this.headEl.append(this.headScroller.el),this.bodyScroller=new F("auto","invisible-scroll"),this.bodyScroller.contentEl.html("<table>"+this.colGroupHtml+"<tbody/></table>"),this.tbodyEl=this.bodyScroller.contentEl.find("tbody"),this.el.append(this.bodyScroller.el),this.joiner=new H("horizontal",[this.headScroller,this.bodyScroller]),this.headTable=this.headEl.find("table"),this.headColEls=this.headEl.find("col"),this.headCellEls=this.headScroller.contentEl.find("tr:last-child th"),this.bodyColEls=this.el.find("col"),this.bodyTable=this.el.find("table"),this.colMinWidths=this.computeColMinWidths(),this.applyColWidths(),this.initColResizing()},e.prototype.renderHeadHtml=function(){var t,e,n,r,i,o,s,a,l,u,c;for(e=this.view.colSpecs,n="<table>",t="<colgroup>",s=0,l=e.length;l>s;s++)c=e[s],t+=c.isMain?'<col class="fc-main-col"/>':"<col/>";for(t+="</colgroup>",this.colGroupHtml=t,n+=t,n+="<tbody>",this.view.superHeaderText&&(n+='<tr class="fc-super"><th class="'+this.view.widgetHeaderClass+'" colspan="'+e.length+'"><div class="fc-cell-content"><span class="fc-cell-text">'+st(this.view.superHeaderText)+"</span></div></th></tr>"),n+="<tr>",o=!0,r=a=0,u=e.length;u>a;r=++a)c=e[r],i=r===e.length-1,n+='<th class="'+this.view.widgetHeaderClass+'"><div><div class="fc-cell-content">'+(c.isMain?'<div class="fc-icon fc-expander-space" />':"")+'<span class="fc-cell-text">'+st(c.labelText||"")+"</span></div>"+(i?"":'<div class="fc-col-resizer"></div>')+"</div></th>";return n+="</tr>",n+="</tbody></table>"},e.prototype.givenColWidths=null,e.prototype.colWidths=null,e.prototype.colMinWidths=null,e.prototype.tableWidth=null,e.prototype.tableMinWidth=null,e.prototype.initColResizing=function(){return this.headEl.find("th .fc-col-resizer").each(function(e){return function(n,r){return r=t(r),r.on("mousedown",function(t){return e.colResizeMousedown(n,t,r)})}}(this))},e.prototype.colResizeMousedown=function(t,e,r){var i,o,s,l;return i=this.colWidths=this.queryColWidths(),i.pop(),i.push("auto"),l=i[t],s=Math.min(this.colMinWidths[t],n),o=new a({dragStart:function(t){return function(){return r.addClass("fc-active")}}(this),drag:function(e){return function(n,r){var o;return o=l+(e.isRTL?-n:n),o=Math.max(o,s),i[t]=o,e.applyColWidths()}}(this),dragStop:function(t){return function(){return r.removeClass("fc-active")}}(this)}),o.mousedown(e)},e.prototype.applyColWidths=function(){var t,e,n,r,i,o,s,a,l,u,c,d,h,p,f,g,m;for(n=this.colMinWidths,i=this.colWidths,t=!0,e=!1,m=0,u=0,h=i.length;h>u;u++)r=i[u],"number"==typeof r?m+=r:(t=!1,
r&&(e=!0));for(a=e?"auto":"",s=function(){var t,e,n;for(n=[],l=t=0,e=i.length;e>t;l=++t)r=i[l],n.push(null!=r?r:a);return n}(),g=0,l=c=0,p=s.length;p>c;l=++c)o=s[l],g+="number"==typeof o?o:n[l];for(l=d=0,f=s.length;f>d;l=++d)o=s[l],this.headColEls.eq(l).width(o),this.bodyColEls.eq(l).width(o);return this.headScroller.setContentMinWidth(g),this.bodyScroller.setContentMinWidth(g),this.tableMinWidth=g,this.tableWidth=t?m:void 0},e.prototype.computeColMinWidths=function(){var t,e,r,i,o,s;for(i=this.givenColWidths,o=[],t=e=0,r=i.length;r>e;t=++e)s=i[t],o.push("number"==typeof s?s:parseInt(this.headColEls.eq(t).css("min-width"))||n);return o},e.prototype.queryColWidths=function(){var e,n,r,i,o;for(i=this.headCellEls,o=[],e=0,n=i.length;n>e;e++)r=i[e],o.push(t(r).outerWidth());return o},e.prototype.updateWidth=function(){return this.headScroller.update(),this.bodyScroller.update(),this.joiner.update(),this.follower?this.follower.update():void 0},e.prototype.headHeight=function(){var t;return t=this.headScroller.contentEl.find("table"),t.height.apply(t,arguments)},e}(),E=function(){function e(e){this.view=e,this.children=[],this.trHash={},this.trs=t()}return e.prototype.view=null,e.prototype.parent=null,e.prototype.prevSibling=null,e.prototype.children=null,e.prototype.depth=0,e.prototype.hasOwnRow=!1,e.prototype.trHash=null,e.prototype.trs=null,e.prototype.isRendered=!1,e.prototype.isExpanded=!0,e.prototype.isShown=!1,e.prototype.addChild=function(t,e){var n,r,i,o,s;for(t.remove(),n=this.children,null!=e?n.splice(e,0,t):(e=n.length,n.push(t)),t.prevSibling=e>0?n[e-1]:null,e<n.length-1&&(n[e+1].prevSibling=t),t.parent=this,t.depth=this.depth+(this.hasOwnRow?1:0),s=t.getNodes(),r=0,i=s.length;i>r;r++)o=s[r],o.added();return this.isShown&&this.isExpanded?t.show():void 0},e.prototype.removeChild=function(t){var e,n,r,i,o,s,a,l,u,c;for(e=this.children,r=!1,n=i=0,s=e.length;s>i;n=++i)if(c=e[n],c===t){r=!0;break}if(r){for(n<e.length-1&&(e[n+1].prevSibling=t.prevSibling),e.splice(n,1),t.recursivelyUnrender(),l=t.getNodes(),o=0,a=l.length;a>o;o++)u=l[o],u.removed();return t.parent=null,t.prevSibling=null,t}return!1},e.prototype.removeChildren=function(){var t,e,n,r,i,o,s;for(o=this.children,e=0,r=o.length;r>e;e++)t=o[e],t.recursivelyUnrender();for(s=this.getDescendants(),n=0,i=s.length;i>n;n++)t=s[n],t.removed();return this.children=[]},e.prototype.remove=function(){return this.parent?this.parent.removeChild(this):void 0},e.prototype.getLastChild=function(){var t;return t=this.children,t[t.length-1]},e.prototype.getPrevRow=function(){var t,e;for(e=this;e;){if(e.prevSibling)for(e=e.prevSibling;t=e.getLastChild();)e=t;else e=e.parent;if(e&&e.hasOwnRow&&e.isShown)return e}return null},e.prototype.getLeadingRow=function(){return this.hasOwnRow?this:this.isExpanded&&this.children.length?this.children[0].getLeadingRow():void 0},e.prototype.getRows=function(t){var e,n,r,i;for(null==t&&(t=[]),this.hasOwnRow&&t.push(this),i=this.children,n=0,r=i.length;r>n;n++)e=i[n],e.getRows(t);return t},e.prototype.getNodes=function(t){var e,n,r,i;for(null==t&&(t=[]),t.push(this),i=this.children,n=0,r=i.length;r>n;n++)e=i[n],e.getNodes(t);return t},e.prototype.getDescendants=function(){var t,e,n,r,i;for(t=[],i=this.children,n=0,r=i.length;r>n;n++)e=i[n],e.getNodes(t);return t},e.prototype.render=function(){var e,n,r,i,o,s,a;if(this.trHash={},s=[],this.hasOwnRow){e=this.getPrevRow(),n=this.view.tbodyHash;for(a in n)i=n[a],o=t("<tr/>"),this.trHash[a]=o,s.push(o[0]),r="render"+N(a)+"Content",this[r]&&this[r](o),e?e.trHash[a].after(o):i.prepend(o)}return this.trs=t(s).on("click",".fc-expander",vt(this,"toggleExpanded")),this.isRendered=!0},e.prototype.unrender=function(){var e,n,r,i;if(this.isRendered){e=this.trHash;for(r in e)n=e[r],i="unrender"+N(r)+"Content",this[i]&&this[i](n);return this.trHash={},this.trs.remove(),this.trs=t(),this.isRendered=!1,this.isShown=!1,this.hidden()}},e.prototype.recursivelyUnrender=function(){var t,e,n,r,i;for(this.unrender(),r=this.children,i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(t.recursivelyUnrender());return i},e.prototype.getTr=function(t){return this.trHash[t]},e.prototype.show=function(){var t,e,n,r,i;if(!this.isShown&&(this.isRendered?this.trs.css("display",""):this.render(),this.isExpanded?this.indicateExpanded():this.indicateCollapsed(),this.isShown=!0,this.shown(),this.isExpanded)){for(r=this.children,i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(t.show());return i}},e.prototype.hide=function(){var t,e,n,r,i;if(this.isShown&&(this.isRendered&&this.trs.hide(),this.isShown=!1,this.hidden(),this.isExpanded)){for(r=this.children,i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(t.hide());return i}},e.prototype.expand=function(){var t,e,n,r;if(!this.isExpanded){for(this.isExpanded=!0,this.indicateExpanded(),this.view.batchRows(),r=this.children,e=0,n=r.length;n>e;e++)t=r[e],t.show();return this.view.unbatchRows(),this.animateExpand()}},e.prototype.collapse=function(){var t,e,n,r;if(this.isExpanded){for(this.isExpanded=!1,this.indicateCollapsed(),this.view.batchRows(),r=this.children,e=0,n=r.length;n>e;e++)t=r[e],t.hide();return this.view.unbatchRows()}},e.prototype.toggleExpanded=function(){return this.isExpanded?this.collapse():this.expand()},e.prototype.indicateExpanded=function(){return this.trs.find(".fc-expander").removeClass(this.getCollapsedIcon()).addClass(this.getExpandedIcon())},e.prototype.indicateCollapsed=function(){return this.trs.find(".fc-expander").removeClass(this.getExpandedIcon()).addClass(this.getCollapsedIcon())},e.prototype.enableExpanding=function(){return this.trs.find(".fc-expander-space").addClass("fc-expander")},e.prototype.disableExpanding=function(){return this.trs.find(".fc-expander-space").removeClass("fc-expander").removeClass(this.getExpandedIcon()).removeClass(this.getCollapsedIcon())},e.prototype.getExpandedIcon=function(){return"fc-icon-down-triangle"},e.prototype.getCollapsedIcon=function(){var t;return t=this.view.isRTL?"left":"right","fc-icon-"+t+"-triangle"},e.prototype.animateExpand=function(){var t,e,n;return n=null!=(t=this.children[0])&&null!=(e=t.getLeadingRow())?e.trs:void 0,n?(n.addClass("fc-collapsed"),setTimeout(function(){return n.addClass("fc-transitioning"),n.removeClass("fc-collapsed")}),n.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){return n.removeClass("fc-transitioning")})):void 0},e.prototype.getMaxTrInnerHeight=function(){var e;return e=0,t.each(this.trHash,function(t){return function(t,n){var r;return r=K(n).find("> div"),e=Math.max(r.height(),e)}}(this)),e},e.prototype.setTrInnerHeight=function(t){return K(this.trs).find("> div").height(t)},e.prototype.shown=function(){return this.hasOwnRow?this.rowShown(this):void 0},e.prototype.hidden=function(){return this.hasOwnRow?this.rowHidden(this):void 0},e.prototype.rowShown=function(t){return(this.parent||this.view).rowShown(t)},e.prototype.rowHidden=function(t){return(this.parent||this.view).rowHidden(t)},e.prototype.added=function(){return this.hasOwnRow?this.rowAdded(this):void 0},e.prototype.removed=function(){return this.hasOwnRow?this.rowRemoved(this):void 0},e.prototype.rowAdded=function(t){return(this.parent||this.view).rowAdded(t)},e.prototype.rowRemoved=function(t){return(this.parent||this.view).rowRemoved(t)},e}(),x=function(e){function n(t,e,r){this.groupSpec=e,this.groupValue=r,n.__super__.constructor.apply(this,arguments)}return Et(n,e),n.prototype.groupSpec=null,n.prototype.groupValue=null,n.prototype.rowRemoved=function(t){return n.__super__.rowRemoved.apply(this,arguments),t===this||this.children.length?void 0:this.remove()},n.prototype.renderGroupContentEl=function(){var e,n;return e=t('<div class="fc-cell-content" />').append(this.renderGroupTextEl()),n=this.groupSpec.render,"function"==typeof n&&(e=n(e,this.groupValue)||e),e},n.prototype.renderGroupTextEl=function(){var e,n;return n=this.groupValue||"",e=this.groupSpec.text,"function"==typeof e&&(n=e(n)||n),t('<span class="fc-cell-text" />').text(n)},n}(E),h=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return Et(n,e),n.prototype.hasOwnRow=!0,n.prototype.renderSpreadsheetContent=function(e){var n;return n=this.renderGroupContentEl(),n.prepend('<span class="fc-icon fc-expander" />'),t('<td class="fc-divider" />').attr("colspan",this.view.colSpecs.length).append(t("<div/>").append(n)).appendTo(e)},n.prototype.renderEventContent=function(t){return t.append('<td class="fc-divider"> <div/> </td>')},n}(x),P=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return Et(n,e),n.prototype.rowspan=0,n.prototype.leadingTr=null,n.prototype.groupTd=null,n.prototype.rowShown=function(t){return this.rowspan+=1,this.renderRowspan(),n.__super__.rowShown.apply(this,arguments)},n.prototype.rowHidden=function(t){return this.rowspan-=1,this.renderRowspan(),n.__super__.rowHidden.apply(this,arguments)},n.prototype.renderRowspan=function(){var e;return this.rowspan?(this.groupTd||(this.groupTd=t('<td class="'+this.view.widgetContentClass+'"/>').append(this.renderGroupContentEl())),this.groupTd.attr("rowspan",this.rowspan),e=this.getLeadingRow().getTr("spreadsheet"),e!==this.leadingTr?(e&&e.prepend(this.groupTd),this.leadingTr=e):void 0):(this.groupTd&&(this.groupTd.remove(),this.groupTd=null),this.leadingTr=null)},n}(x),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Et(e,t),e.prototype.hasOwnRow=!0,e.prototype.segContainerEl=null,e.prototype.segContainerHeight=null,e.prototype.innerEl=null,e.prototype.bgSegContainerEl=null,e.prototype.isSegsRendered=!1,e.prototype.bgSegs=null,e.prototype.fgSegs=null,e.prototype.renderEventContent=function(t){return t.html('<td class="'+this.view.widgetContentClass+'"> <div> <div class="fc-event-container" /> </div> </td>'),this.segContainerEl=t.find(".fc-event-container"),this.innerEl=this.bgSegContainerEl=t.find("td > div"),this.isSegsRendered?void 0:(this.bgSegs&&this.view.timeGrid.renderFillInContainer("bgEvent",this,this.bgSegs),this.fgSegs&&this.view.timeGrid.renderFgSegsInContainers([[this,this.fgSegs]]),this.isSegsRendered=!0)},e.prototype.unrenderEventContent=function(){return this.bgSegs=null,this.fgSegs=null,this.isSegsRendered=!1},e}(E),D=function(e){function n(t,e){this.resource=e,n.__super__.constructor.apply(this,arguments)}return Et(n,e),n.prototype.resource=null,n.prototype.rowAdded=function(t){return n.__super__.rowAdded.apply(this,arguments),t!==this&&this.isRendered&&1===this.children.length?(this.enableExpanding(),this.isExpanded?this.indicateExpanded():this.indicateCollapsed()):void 0},n.prototype.rowRemoved=function(t){return n.__super__.rowRemoved.apply(this,arguments),t!==this&&this.isRendered&&!this.children.length?this.disableExpanding():void 0},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.children.length>0?this.enableExpanding():this.disableExpanding(),this.view.trigger("resourceRender",this.resource,this.resource,this.getTr("spreadsheet").find("> td"),this.getTr("event").find("> td"))},n.prototype.renderSpreadsheetContent=function(e){var n,r,i,o,s,a,l,u,c,d;for(l=this.resource,a=this.view.colSpecs,u=[],o=0,s=a.length;s>o;o++)n=a[o],n.group||(i=n.field?l[n.field]||null:l,d="function"==typeof n.text?n.text(l,i):i,r=t('<div class="fc-cell-content">'+(n.isMain?this.renderGutterHtml():"")+'<span class="fc-cell-text">'+(d?st(d):"&nbsp;")+"</span></div>"),"function"==typeof n.render&&(r=n.render(l,r,i)||r),c=t('<td class="'+this.view.widgetContentClass+'"/>').append(r),n.isMain&&c.wrapInner("<div/>"),u.push(e.append(c)));return u},n.prototype.renderGutterHtml=function(){var t,e,n,r;for(t="",e=n=0,r=this.depth;r>n;e=n+=1)t+='<span class="fc-icon"/>';return t+='<span class="fc-icon fc-expander-space"/>'},n}(u),c.views.timeline.resourceClass=C,b="2015-08-17",A={years:1,weeks:1},p="http://fullcalendar.io/scheduler/license/",y=["GPL-My-Project-Is-Open-Source","CC-Attribution-NonCommercial-NoDerivatives"],mt=function(t,e){return ut(window.location.href)||dt(t)?void 0:yt('Please use a valid license key. <a href="'+p+'">More Info</a>',e)},dt=function(n){var r,i,o,s;return-1!==t.inArray(n,y)?!0:(i=(n||"").match(/^(\d+)\-fcs\-(\d+)$/),i&&10===i[1].length&&(o=e.utc(1e3*parseInt(i[2])),s=e.utc(c.mockSchedulerReleaseDate||b),s.isValid()&&(r=s.clone().subtract(A),o.isAfter(r)))?!0:!1)},ut=function(t){return Boolean(t.match(/\w+\:\/\/fullcalendar\.io\/|\/demos\/[\w-]+\.html$/))},yt=function(e,n){return n.append(t('<div class="fc-license-message" />').html(e))}});